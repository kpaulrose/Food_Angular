import './polyfills.server.mjs';
import{b as n,d as u}from"./chunk-QXFP2ZB7.mjs";import{a as i,b as c}from"./chunk-VVCT4QZE.mjs";var l=(()=>{class r{constructor(){this.itemsSubject=new n([]),this.loadCartFromLocalStorage()}loadCartFromLocalStorage(){if(typeof window<"u"&&window.localStorage){let t=localStorage.getItem("cartItems");if(t){let o=JSON.parse(t);this.itemsSubject.next(o)}}}saveCartToLocalStorage(t){typeof window<"u"&&window.localStorage&&localStorage.setItem("cartItems",JSON.stringify(t))}getItem(){return this.itemsSubject.asObservable()}addItem(t){let o=this.itemsSubject.value,a=o.find(e=>e.id===t.id),s;a?s=o.map(e=>e.id===t.id?c(i({},e),{quantity:e.quantity+1,price:e.food.price*(e.quantity+1)}):e):s=[...o,t],this.itemsSubject.next(s),this.saveCartToLocalStorage(s)}removeItem(t){let a=this.itemsSubject.value.filter(s=>s.id!==t);this.itemsSubject.next(a),this.saveCartToLocalStorage(a)}updateQuantity(t,o){let s=this.itemsSubject.value.map(e=>e.id===t?c(i({},e),{quantity:o,price:e.food.price*o}):e);this.itemsSubject.next(s),this.saveCartToLocalStorage(s)}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{l as a};
